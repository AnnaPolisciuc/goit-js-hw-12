{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector('.gallery'); \n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function renderPhotos(photos) {\n    \n    const markup = photos.map(photo => {\n        const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = photo;\n        const tagsText = tags.split(', ').join(', ');\n        const photoMarkup = \n    `<li class=\"photo-card\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"photo-info\">\n        <p>Tags: ${tagsText}</p>\n        <p>Likes: ${likes}</p>\n        <p>Views: ${views}</p>\n        <p>Comments: ${comments}</p>\n        <p>Downloads: ${downloads}</p>\n    </div>\n</li>\n`;\nreturn photoMarkup;\n   }).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n} \n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loader').classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector('.btn').classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.btn').classList.add('hidden');\n}","import axios from 'axios';\n\nconst API_KEY = \"51798478-5201f32441bd2af0c91072e2d\";\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nlet page = 1;\nexport const per_page = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page\n    };\n    const response = await axios.get(\"\", { params });\n    return response.data; \n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"; \nimport { clearGallery, renderPhotos, hideLoader, showLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport { getImagesByQuery, per_page } from \"./js/pixabay-api\";\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst fetchPhotosBtn = document.querySelector('.btn');\n\nlet query = \"\";\nlet page = 1;\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    hideLoadMoreButton();\n    clearGallery();\n    query = input.value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'The search box is empty. Try again!',\n        });\n        return;\n    }\n\n    try {\n        showLoader();\n        const data = await getImagesByQuery(query, page);\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'Oops',\n                message: 'No images found. Try another query!'\n            });\n            return;\n        }\n\n        renderPhotos(data.hits);\n\n        if (data.totalHits > per_page) {\n            showLoadMoreButton();\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.'\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nfetchPhotosBtn.addEventListener(\"click\", async () => {\n    page++;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        if (data.hits.length > 0) {\n            const startIndex = (page - 1) * per_page;\n            renderPhotos(data.hits);\n            \n            const galleryItems = document.querySelectorAll('.gallery li');\n            const firstNewCard = galleryItems[startIndex];\n            if (firstNewCard) {\n                const cardHeight = firstNewCard.getBoundingClientRect().height;\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth'\n                });\n            }\n        }\n\n        if (page * per_page >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'End',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.'\n        });\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["galleryContainer","lightbox","SimpleLightbox","renderPhotos","photos","markup","photo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","tagsText","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","API_KEY","axios","per_page","getImagesByQuery","query","page","params","form","input","fetchPhotosBtn","event","iziToast","data","startIndex","firstNewCard","cardHeight"],"mappings":"owBAGA,MAAMA,EAAmB,SAAS,cAAc,UAAU,EAE1D,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAaC,EAAQ,CAEjC,MAAMC,EAASD,EAAO,IAAIE,GAAS,CAC/B,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EAC3EQ,EAAWL,EAAK,MAAM,IAAI,EAAE,KAAK,IAAI,EAenD,MAbI;AAAA,eACWD,CAAa;AAAA,gBACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,mBAGvBK,CAAQ;AAAA,oBACPJ,CAAK;AAAA,oBACLC,CAAK;AAAA,uBACFC,CAAQ;AAAA,wBACPC,CAAS;AAAA;AAAA;AAAA,CAKjC,CAAI,EAAE,KAAK,EAAE,EAETb,EAAiB,mBAAmB,YAAaK,CAAM,EACvDJ,EAAS,QAAO,CACpB,CAEO,SAASc,GAAe,CAC3Bf,EAAiB,UAAY,EACjC,CAEO,SAASgB,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,CAC/D,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,CAC5D,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,MAAM,EAAE,UAAU,OAAO,QAAQ,CAC5D,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,MAAM,EAAE,UAAU,IAAI,QAAQ,CACzD,CCpDA,MAAMC,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAW,GAEjB,eAAeC,EAAiBC,EAAOC,EAAM,CAChD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACd,EAEI,OADiB,MAAMJ,EAAM,IAAI,GAAI,CAAE,OAAAK,CAAM,CAAE,GAC/B,IACpB,CCdA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,SAAS,aAAa,EACnCE,EAAiB,SAAS,cAAc,MAAM,EAEpD,IAAIL,EAAQ,GACRC,EAAO,EAEXE,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAO3C,GANAA,EAAM,eAAc,EACpBX,IACAJ,IACAS,EAAQI,EAAM,MAAM,OACpBH,EAAO,EAEH,CAACD,EAAO,CACRO,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACrB,CAAS,EACD,MACH,CAED,GAAI,CACAf,IACA,MAAMgB,EAAO,MAAMT,EAAiBC,EAAOC,CAAI,EAE/C,GAAIO,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,QAAQ,CACb,MAAO,OACP,QAAS,qCACzB,CAAa,EACD,MACH,CAED5B,EAAa6B,EAAK,IAAI,EAElBA,EAAK,UAAYV,GACjBJ,GAGP,MAAe,CACZa,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACrB,CAAS,CACT,QAAc,CACNd,GACH,CACL,CAAC,EAEDY,EAAe,iBAAiB,QAAS,SAAY,CACjDJ,IACAT,IAEA,GAAI,CACA,MAAMgB,EAAO,MAAMT,EAAiBC,EAAOC,CAAI,EAE/C,GAAIO,EAAK,KAAK,OAAS,EAAG,CACtB,MAAMC,GAAcR,EAAO,GAAKH,EAChCnB,EAAa6B,EAAK,IAAI,EAGtB,MAAME,EADe,SAAS,iBAAiB,aAAa,EAC1BD,CAAU,EAC5C,GAAIC,EAAc,CACd,MAAMC,EAAaD,EAAa,sBAAqB,EAAG,OACxD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC9B,CAAiB,CACJ,CACJ,CAEGV,EAAOH,GAAYU,EAAK,WACxBb,IACAY,EAAS,KAAK,CACV,MAAO,MACP,QAAS,4DACzB,CAAa,GAEDb,GAGP,MAAe,CACZa,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACrB,CAAS,CACT,QAAc,CACNd,GACH,CACL,CAAC"}